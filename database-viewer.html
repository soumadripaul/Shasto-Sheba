<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Bondhu - Database Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .stat-card .icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-card .count {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-card .label {
            color: #666;
            margin-top: 5px;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #ddd;
            overflow-x: auto;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            background: transparent;
            border: none;
            font-size: 1.1em;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            border-bottom: 3px solid #667eea;
            color: #667eea;
            font-weight: bold;
        }

        .content {
            padding: 30px;
        }

        .collection {
            display: none;
        }

        .collection.active {
            display: block;
        }

        .data-card {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .data-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .data-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .data-field {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }

        .data-field label {
            font-weight: bold;
            color: #495057;
            display: inline-block;
            min-width: 150px;
        }

        .data-field value {
            color: #212529;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.5em;
            color: #667eea;
        }

        .error {
            background: #fee;
            border: 1px solid #fcc;
            padding: 20px;
            border-radius: 10px;
            color: #c00;
            margin: 20px 0;
        }

        .empty {
            text-align: center;
            padding: 50px;
            color: #999;
            font-size: 1.2em;
        }

        .refresh-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transition: transform 0.3s;
        }

        .refresh-btn:hover {
            transform: scale(1.1);
        }

        .timestamp {
            text-align: center;
            padding: 20px;
            color: #999;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üóÑÔ∏è Mon Bondhu Database Viewer</h1>
            <p>‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ MongoDB ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ - ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≠‡¶ø‡¶â</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <div class="icon">üí°</div>
                <div class="count" id="count-tips">-</div>
                <div class="label">Health Tips</div>
            </div>
            <div class="stat-card">
                <div class="icon">üè•</div>
                <div class="count" id="count-centers">-</div>
                <div class="label">Health Centers</div>
            </div>
            <div class="stat-card">
                <div class="icon">üìÖ</div>
                <div class="count" id="count-events">-</div>
                <div class="label">Events</div>
            </div>
            <div class="stat-card">
                <div class="icon">üë®‚Äç‚öïÔ∏è</div>
                <div class="count" id="count-workers">-</div>
                <div class="label">Workers</div>
            </div>
            <div class="stat-card">
                <div class="icon">üÜò</div>
                <div class="count" id="count-requests">-</div>
                <div class="label">Help Requests</div>
            </div>
            <div class="stat-card">
                <div class="icon">üí≠</div>
                <div class="count" id="count-moods">-</div>
                <div class="label">Mental Health Records</div>
            </div>
            <div class="stat-card">
                <div class="icon">üë∂</div>
                <div class="count" id="count-maternal">-</div>
                <div class="label">Maternal Health</div>
            </div>
            <div class="stat-card">
                <div class="icon">ü©∫</div>
                <div class="count" id="count-symptoms">-</div>
                <div class="label">Symptom Checks</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showCollection('healthtips')">üí° Health Tips</button>
            <button class="tab" onclick="showCollection('healthcenters')">üè• Health Centers</button>
            <button class="tab" onclick="showCollection('events')">üìÖ Events</button>
            <button class="tab" onclick="showCollection('workers')">üë®‚Äç‚öïÔ∏è Workers</button>
            <button class="tab" onclick="showCollection('helprequests')">üÜò Help Requests</button>
            <button class="tab" onclick="showCollection('mentalhealth')">üí≠ Mental Health</button>
            <button class="tab" onclick="showCollection('maternalhealth')">üë∂ Maternal Health</button>
            <button class="tab" onclick="showCollection('symptomchecks')">ü©∫ Symptom Checks</button>
        </div>

        <div class="content">
            <div id="healthtips" class="collection active">
                <div class="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            </div>
            <div id="healthcenters" class="collection">
                <div class="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            </div>
            <div id="events" class="collection">
                <div class="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            </div>
            <div id="workers" class="collection">
                <div class="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            </div>
            <div id="helprequests" class="collection">
                <div class="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            </div>
            <div id="mentalhealth" class="collection">
                <div class="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            </div>
            <div id="maternalhealth" class="collection">
                <div class="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            </div>
            <div id="symptomchecks" class="collection">
                <div class="loading">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            </div>
        </div>

        <div class="timestamp" id="timestamp">
            ‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: -
        </div>
    </div>

    <button class="refresh-btn" onclick="loadAllData()" title="Refresh Data">
        üîÑ
    </button>

    <script>
        const API_URL = 'http://localhost:5000/api';

        async function fetchData(endpoint) {
            try {
                const response = await fetch(`${API_URL}${endpoint}`);
                const data = await response.json();
                return data.success ? data.data : [];
            } catch (error) {
                console.error('Error fetching data:', error);
                return null;
            }
        }

        function showCollection(collectionName) {
            // Hide all collections
            document.querySelectorAll('.collection').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));

            // Show selected collection
            document.getElementById(collectionName).classList.add('active');
            event.target.classList.add('active');
        }

        function renderHealthTips(tips) {
            const container = document.getElementById('healthtips');
            if (!tips || tips.length === 0) {
                container.innerHTML = '<div class="empty">‡¶ï‡ßã‡¶® ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡ßá‡¶á</div>';
                return;
            }

            container.innerHTML = tips.map(tip => `
                <div class="data-card">
                    <h3>${tip.icon} ${tip.title}</h3>
                    <div class="data-field">
                        <label>‡¶¨‡¶ø‡¶¨‡¶∞‡¶£:</label>
                        <value>${tip.description}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó:</label>
                        <value>${tip.category}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶≠‡¶æ‡¶∑‡¶æ:</label>
                        <value>${tip.language}</value>
                    </div>
                </div>
            `).join('');
        }

        function renderHealthCenters(centers) {
            const container = document.getElementById('healthcenters');
            if (!centers || centers.length === 0) {
                container.innerHTML = '<div class="empty">‡¶ï‡ßã‡¶® ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡ßá‡¶á</div>';
                return;
            }

            container.innerHTML = centers.map(center => `
                <div class="data-card">
                    <h3>üè• ${center.name}</h3>
                    <div class="data-field">
                        <label>‡¶ß‡¶∞‡¶®:</label>
                        <value>${center.type}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</label>
                        <value>${center.address}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶´‡ßã‡¶®:</label>
                        <value>${center.phone || 'N/A'}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶∏‡ßá‡¶¨‡¶æ:</label>
                        <value>${center.services ? center.services.join(', ') : 'N/A'}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶∏‡¶Æ‡¶Ø‡¶º:</label>
                        <value>${center.availability}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∏‡ßá‡¶¨‡¶æ:</label>
                        <value>${center.isEmergency ? '‡¶π‡ßç‡¶Ø‡¶æ‡¶Å' : '‡¶®‡¶æ'}</value>
                    </div>
                </div>
            `).join('');
        }

        function renderEvents(events) {
            const container = document.getElementById('events');
            if (!events || events.length === 0) {
                container.innerHTML = '<div class="empty">‡¶ï‡ßã‡¶® ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡ßá‡¶á</div>';
                return;
            }

            container.innerHTML = events.map(event => `
                <div class="data-card">
                    <h3>üìÖ ${event.title}</h3>
                    <div class="data-field">
                        <label>‡¶¨‡¶ø‡¶¨‡¶∞‡¶£:</label>
                        <value>${event.description}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
                        <value>${new Date(event.date).toLocaleDateString('bn-BD')}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶∏‡¶Æ‡¶Ø‡¶º:</label>
                        <value>${event.time}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶∏‡ßç‡¶•‡¶æ‡¶®:</label>
                        <value>${event.location}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶Ü‡¶Ø‡¶º‡ßã‡¶ú‡¶ï:</label>
                        <value>${event.organizer}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó:</label>
                        <value>${event.category}</value>
                    </div>
                </div>
            `).join('');
        }

        function renderWorkers(workers) {
            const container = document.getElementById('workers');
            if (!workers || workers.length === 0) {
                container.innerHTML = '<div class="empty">‡¶ï‡ßã‡¶® ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡ßá‡¶á</div>';
                return;
            }

            container.innerHTML = workers.map(worker => `
                <div class="data-card">
                    <h3>üë®‚Äç‚öïÔ∏è ${worker.name}</h3>
                    <div class="data-field">
                        <label>‡¶™‡¶¶‡¶¨‡ßÄ:</label>
                        <value>${worker.designation}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶§‡ßç‡¶¨:</label>
                        <value>${worker.specialization || 'N/A'}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶è‡¶≤‡¶æ‡¶ï‡¶æ:</label>
                        <value>${worker.area}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶´‡ßã‡¶®:</label>
                        <value>${worker.phone}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶á‡¶Æ‡ßá‡¶á‡¶≤:</label>
                        <value>${worker.email || 'N/A'}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ:</label>
                        <value>${worker.experience} ‡¶¨‡¶õ‡¶∞</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ:</label>
                        <value>${worker.availability}</value>
                    </div>
                </div>
            `).join('');
        }

        function renderHelpRequests(requests) {
            const container = document.getElementById('helprequests');
            if (!requests || requests.length === 0) {
                container.innerHTML = '<div class="empty">‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶® ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø‡ßá‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶®‡ßá‡¶á<br>Frontend ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶ï‡¶ü‡¶ø message ‡¶™‡¶æ‡¶†‡¶æ‡¶ì!</div>';
                return;
            }

            container.innerHTML = requests.map(req => `
                <div class="data-card">
                    <h3>üé´ Ticket: ${req.ticketCode || 'N/A'}</h3>
                    <div class="data-field">
                        <label>‡¶®‡¶æ‡¶Æ:</label>
                        <value>${req.name}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶´‡ßã‡¶®:</label>
                        <value>${req.phone}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶è‡¶≤‡¶æ‡¶ï‡¶æ:</label>
                        <value>${req.location}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶¨‡¶ø‡¶¨‡¶∞‡¶£:</label>
                        <value>${req.description}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø‡¶§‡¶æ:</label>
                        <value>${req.urgency}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ:</label>
                        <value>${req.status}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
                        <value>${new Date(req.createdAt).toLocaleString('bn-BD')}</value>
                    </div>
                    ${req.response ? `
                        <div class="data-field">
                            <label>‡¶â‡¶§‡ßç‡¶§‡¶∞:</label>
                            <value>${req.response}</value>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function renderMentalHealth(records) {
            const container = document.getElementById('mentalhealth');
            if (!records || records.length === 0) {
                container.innerHTML = '<div class="empty">‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶® ‡¶Æ‡ßÅ‡¶° ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡ßá‡¶á<br>Mental Health page ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶ï‡¶ü‡¶ø mood select ‡¶ï‡¶∞‡ßã!</div>';
                return;
            }

            // Helper function to get mood emoji
            function getMoodEmoji(level) {
                if (level >= 9) return 'üòä ‡¶ñ‡ßÅ‡¶¨ ‡¶≠‡¶æ‡¶≤‡ßã';
                if (level >= 7) return 'üôÇ ‡¶≠‡¶æ‡¶≤‡ßã';
                if (level >= 5) return 'üòê ‡¶Æ‡ßã‡¶ü‡¶æ‡¶Æ‡ßÅ‡¶ü‡¶ø';
                return 'üòû ‡¶ñ‡¶æ‡¶∞‡¶æ‡¶™';
            }

            // Helper function to get mood color
            function getMoodColor(level) {
                if (level >= 9) return '#22c55e';
                if (level >= 7) return '#86efac';
                if (level >= 5) return '#fbbf24';
                return '#f87171';
            }

            container.innerHTML = records.map(record => `
                <div class="data-card" style="border-left: 5px solid ${getMoodColor(record.moodLevel)}">
                    <h3>üí≠ ${getMoodEmoji(record.moodLevel)}</h3>
                    <div class="data-field">
                        <label>‡¶Æ‡ßÅ‡¶° ‡¶≤‡ßá‡¶≠‡ßá‡¶≤:</label>
                        <value style="color: ${getMoodColor(record.moodLevel)}; font-weight: bold; font-size: 1.2em;">
                            ${record.moodLevel}/10
                        </value>
                    </div>
                    <div class="data-field">
                        <label>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID:</label>
                        <value>${record.userId}</value>
                    </div>
                    ${record.notes ? `
                        <div class="data-field">
                            <label>‡¶®‡ßã‡¶ü:</label>
                            <value>${record.notes}</value>
                        </div>
                    ` : ''}
                    ${record.activities && record.activities.length > 0 ? `
                        <div class="data-field">
                            <label>‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡ßç‡¶∞‡¶Æ:</label>
                            <value>${record.activities.join(', ')}</value>
                        </div>
                    ` : ''}
                    <div class="data-field">
                        <label>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
                        <value>${new Date(record.date).toLocaleString('bn-BD', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        })}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£:</label>
                        <value>${new Date(record.createdAt).toLocaleString('bn-BD')}</value>
                    </div>
                </div>
            `).join('');
        }

        function renderMaternalHealth(records) {
            if (!records || records.length === 0) {
                document.getElementById('maternalhealth').innerHTML = '<div class="empty-state">‡¶ï‡ßã‡¶®‡ßã ‡¶Æ‡¶æ ‡¶ì ‡¶∂‡¶ø‡¶∂‡ßÅ ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡ßá‡¶á</div>';
                return;
            }

            document.getElementById('maternalhealth').innerHTML = records.map(record => `
                <div class="data-card">
                    <div class="data-field">
                        <label>üë∂ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶ü‡¶æ‡¶á‡¶™:</label>
                        <value>${record.trackingType === 'pregnancy' ? 'ü§∞ ‡¶ó‡¶∞‡ßç‡¶≠‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶Ø‡¶§‡ßç‡¶®' : 'üë∂ ‡¶∂‡¶ø‡¶∂‡ßÅ‡¶∞ ‡¶ü‡¶ø‡¶ï‡¶æ'}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID:</label>
                        <value>${record.userId}</value>
                    </div>
                    ${record.lmpDate ? `
                        <div class="data-field">
                            <label>‡¶∂‡ßá‡¶∑ ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
                            <value>${new Date(record.lmpDate).toLocaleDateString('bn-BD')}</value>
                        </div>
                    ` : ''}
                    ${record.birthDate ? `
                        <div class="data-field">
                            <label>‡¶ú‡¶®‡ßç‡¶Æ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
                            <value>${new Date(record.birthDate).toLocaleDateString('bn-BD')}</value>
                        </div>
                    ` : ''}
                    ${record.schedule && record.schedule.length > 0 ? `
                        <div class="data-field">
                            <label>‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ:</label>
                            <value style="white-space: pre-line;">${record.schedule.map(s => 
                                `üìÖ ${s.title} - ${new Date(s.date).toLocaleDateString('bn-BD')} ${s.completed ? '‚úì' : ''}`
                            ).join('\n')}</value>
                        </div>
                    ` : ''}
                    ${record.notes ? `
                        <div class="data-field">
                            <label>‡¶®‡ßã‡¶ü:</label>
                            <value>${record.notes}</value>
                        </div>
                    ` : ''}
                    <div class="data-field">
                        <label>‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£:</label>
                        <value>${new Date(record.createdAt).toLocaleString('bn-BD')}</value>
                    </div>
                </div>
            `).join('');
        }

        function renderSymptomChecks(records) {
            if (!records || records.length === 0) {
                document.getElementById('symptomchecks').innerHTML = '<div class="empty-state">‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡¶ï‡ßç‡¶∑‡¶£ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡ßá‡¶á</div>';
                return;
            }

            function getSeverityBadge(severity) {
                const badges = {
                    'low': { color: '#22c55e', text: '‚úì ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶', icon: 'üíä' },
                    'medium': { color: '#fbbf24', text: '‚ö†Ô∏è ‡¶Æ‡¶æ‡¶ù‡¶æ‡¶∞‡¶ø', icon: 'ü•§' },
                    'high': { color: '#f87171', text: 'üö® ‡¶¨‡¶ø‡¶™‡¶¶‡¶ú‡¶®‡¶ï', icon: 'üè•' }
                };
                return badges[severity] || badges['medium'];
            }

            document.getElementById('symptomchecks').innerHTML = records.map(record => {
                const badge = getSeverityBadge(record.result?.severity);
                return `
                <div class="data-card" style="border-left: 5px solid ${badge.color}">
                    <div class="data-field">
                        <label>ü©∫ ‡¶≤‡¶ï‡ßç‡¶∑‡¶£:</label>
                        <value style="font-size: 1.2em; font-weight: bold;">${record.symptom}</value>
                    </div>
                    ${record.subQuestion ? `
                        <div class="data-field">
                            <label>‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®:</label>
                            <value>${record.subQuestion}</value>
                        </div>
                        <div class="data-field">
                            <label>‡¶â‡¶§‡ßç‡¶§‡¶∞:</label>
                            <value>${record.answer}</value>
                        </div>
                    ` : ''}
                    ${record.result ? `
                        <div class="data-field">
                            <label>${badge.icon} ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ:</label>
                            <value style="color: ${badge.color}; font-weight: bold;">${badge.text}</value>
                        </div>
                        <div class="data-field" style="background: #f9fafb; padding: 10px; border-radius: 5px; margin-top: 10px;">
                            <label>‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂:</label>
                            <value style="line-height: 1.6;">${record.result.message}</value>
                        </div>
                    ` : ''}
                    <div class="data-field">
                        <label>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID:</label>
                        <value>${record.userId}</value>
                    </div>
                    <div class="data-field">
                        <label>‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
                        <value>${new Date(record.checkDate || record.createdAt).toLocaleString('bn-BD', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        })}</value>
                    </div>
                </div>
            `;
            }).join('');
        }

        async function loadAllData() {
            console.log('Loading data...');

            // Fetch all data
            const [tips, centers, events, workers, requests, moods, maternal, symptoms] = await Promise.all([
                fetchData('/health-tips'),
                fetchData('/health-centers'),
                fetchData('/events'),
                fetchData('/workers'),
                fetchData('/help-requests'),
                fetchData('/mental-health'),
                fetchData('/maternal-health'),
                fetchData('/symptom-checks')
            ]);

            // Update counts
            document.getElementById('count-tips').textContent = tips?.length || 0;
            document.getElementById('count-centers').textContent = centers?.length || 0;
            document.getElementById('count-events').textContent = events?.length || 0;
            document.getElementById('count-workers').textContent = workers?.length || 0;
            document.getElementById('count-requests').textContent = requests?.length || 0;
            document.getElementById('count-moods').textContent = moods?.length || 0;
            document.getElementById('count-maternal').textContent = maternal?.length || 0;
            document.getElementById('count-symptoms').textContent = symptoms?.length || 0;

            // Render data
            renderHealthTips(tips);
            renderHealthCenters(centers);
            renderEvents(events);
            renderWorkers(workers);
            renderHelpRequests(requests);
            renderMentalHealth(moods);
            renderMaternalHealth(maternal);
            renderSymptomChecks(symptoms);

            // Update timestamp
            document.getElementById('timestamp').textContent = 
                '‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: ' + new Date().toLocaleString('bn-BD');
        }

        // Load data on page load
        window.addEventListener('DOMContentLoaded', loadAllData);

        // Auto-refresh every 30 seconds
        setInterval(loadAllData, 30000);
    </script>
</body>
</html>
